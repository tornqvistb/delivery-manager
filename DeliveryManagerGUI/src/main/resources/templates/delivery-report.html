<!DOCTYPE html>

<html lang="sv" class="js" xmlns:th="http://www.thymeleaf.org">

<meta charset="utf-8"/>
<head th:include="head" th:remove="tag" />

<body class="layout-2">
	<div id="body">
		<!-- <div class="include" data-include="header"></div> -->
		<div th:include="header" th:remove="tag"></div>
		<div id="main" class="cf">
			<div id="content">
				<div th:include="sub-header-reports" th:remove="tag"></div>
				<!-- <div class="include" data-include="sub-header"></div> -->
				<div id="service-portal" class="sp-layout-4">
					<div class="content-1">
						<div class="m m-1 m-page cf">
							<div class="m-h main-header cf">
								<div class="page-heading">
									<h2>Rapporter</h2>
								</div>
							</div>
							<div class="tab-navigation">
								<ul class="tabs cf">
									<li>
										<a th:href="@{/reports/sla}" rel="nofollow">SLA-uppföljning
										</a>			
									</li>
									<li class="sel">
										<a th:href="@{/reports/delivery}" rel="nofollow">Utförda leveranser
										</a>			
									</li>
									<li>
										<a th:href="@{/reports/transport}" rel="nofollow">Körschema
										</a>			
									</li>
								</ul>
							</div>
							<div class="form-section case-listing"></div>
							<!-- Här kan man lägga på en vänster meny -->
							<div class="m-form">
								<div class="content e-tjansteplattform hamster">
									<div th:if="${reqAttr.thanksMessage != null}"
										class="side-margin information-text system-info thanks-message">
										<span th:text="${reqAttr.thanksMessage}">Det gick bra</span>
									</div>
									<div th:if="${reqAttr.errorMessage != null}" class="side-margin information-text system-info error-message">
										<p th:utext="${reqAttr.errorMessage}"></p>
									</div>
									
									
									<div class="form-step">
									
										<!-- Här kan man lägga på ett tack meddelande -->
										<form class="form-general" th:action= "@{/reports/delivery/search}" th:object="${reqAttr}" method="get">
											<div class="form-section">
												<h3 class="expandtrigger">Filtrera och sök</h3>
												<div class="row cols-1 cf">
													<div class="col">
														<div class="select">
															<label for="status">Välj kundgrupp</label> 
															
															<select
																th:field="${reqAttr.customerId}"
																id="customerGroupId" name="customerGroupId"
																>
																<option th:value="${reqAttr.zeroValue}">Välj kundgrupp</option>
																<option th:each="customerGroup : ${customerGroups}" th:value="${customerGroup.id}" th:text="${customerGroup.name}"></option>
		
															</select>
														</div>
													</div>
												</div>
												<div class="information-text system-info help-message">
													<p>Om ni vill kan ni ange en lägre resp. högre gräns för ordernummer.<br />Detsamma gäller för leveransdatum.</p>
												</div>
												<div class="row cols-3 cf">
													<div class="col col-1">
														<div class="text">
															<label for="fromOrderNo">Från ordernummer</label>
															<input type="number" th:field="${reqAttr.fromOrderNo}" maxlength="10" value="" name="fromOrderNo" class="small" id="fromOrderNo"/>
														</div>
													 </div> 
													<div class="col col-2">
														<div class="text">
															<label for="toOrderNo">Till ordernummer</label>
															<input type="number" th:field="${reqAttr.toOrderNo}" maxlength="10" value="" name="toOrderNo" class="small" id="toOrderNo"/>
														</div>
													</div>
												</div>
												<div class="row cols-3 cf">													
													<div class="col col-1">
														<div class="text">
															<label for="fromDate">Från leveransdatum</label>
															<input type="date" th:field="${reqAttr.fromDate}" maxlength="10" value="" name="fromDate" class="date small" id="fromDate"/>
														</div>
													 </div> 
													<div class="col col-2">
														<div class="text">
															<label for="toDate">Till leveransdatum</label>
															<input type="date" th:field="${reqAttr.toDate}" maxlength="10" value="" name="toDate" class="date small" id="toDate"/>
														</div>
													</div>
												</div>
												
												<h3>Fält att visa i rapporten (endast aktuellt om man valt kundgrupp ovan)</h3>

												<table>
													<colgroup>
														<col style="width: 50%" />
														<col style="width: 50%" />
													</colgroup>
													<thead>
														<tr>
															<th scope="col">Fält</th>
															<th scope="col">Visa</th>
														</tr>
													</thead>
													<tbody>													
														<tr th:each="customerCustomField, loop : *{customerCustomFields}">
															<td th:text="${customerCustomField.label}">Rubriken</td>
															<td>
																<input type="hidden" name="show1" th:field="*{customerCustomFields[__${loop.index}__].id}"/>
																<input type="hidden" name="show2" th:field="*{customerCustomFields[__${loop.index}__].label}"/>
																<input type="checkbox" name="showInDeliveryReport" th:field="*{customerCustomFields[__${loop.index}__].showInDeliveryReport}" th:checked="*{customerCustomFields[__${loop.index}__].showInDeliveryReport}" />
															</td>
														</tr>
													</tbody>
												</table>
												
												<div class="row">
													<input class="btn" type="submit" value="Sök" id="ActionSearch" name="ActionSearch"/>
												</div>													
											</div>
										</form>
										<div th:if="${not #lists.isEmpty(orders)}" th:remove="tag">
											<div class="form-section">
												<h3>Sökresultat</h3>
												<div class="information-text system-info thanks-message">
													<p th:text="${reqAttr.resultNotEmptyMsg}">Succetext</p>
												</div>
											</div>
											<form class="form-general" th:action= "@{/reports/delivery/export}" th:object="${orders}" method="get" >											
												<div class="form-section" id="search-results" >
													<input class="btn" type="submit" value="Exportera till excel" id="ActionExportToExcel" name="ActionExportToExcel"/>
												</div>
											</form>
											<form th:if="${reqAttr.customerId > 0}" class="form-general" th:action= "@{/reports/delivery/informCustomer}" th:object="${orders}" method="get" >											
												<div class="form-section" id="search-results" >
													<input class="btn" type="submit" value="Maila rapport till kund" id="ActionInformCustomer" name="ActionInformCustomer"/>
												</div>
											</form>
										</div>
										<div th:if="${reqAttr.resultEmptyMsg != null}" class="form-section">
											<h3>Sökresultat</h3>
											<div class="information-text system-info error-message">
												<p th:text="${reqAttr.resultEmptyMsg}">Succetext</p>
											</div>										
										</div>										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div th:include="footer" th:remove="tag"></div>
	</div>
</body>
</html>